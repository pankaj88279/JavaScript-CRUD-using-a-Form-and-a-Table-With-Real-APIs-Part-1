<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <style>
        .a_tbr{
            border: 1px dashed red;
        }
        </style>
        <script>

        </script>
    </head>
    <body>
        <div class="container">
            <div class="row " >
                <div class="col-4 a_tbr">
                    <form onsubmit="sendMyData(this);return false;">
                        <div class="mb-3">
                        <label for="first name" class="form-label">first name</label>
                        <input type="text" class="form-control" id="firstname" aria-describedby="emailHelp">
                    
                        </div>
                        <div class="mb-3">
                        <label for="last name" class="form-label">last name</label>
                        <input autofocus type=text class="form-control" id="lastname" aria-describedby="emailHelp">
                        </div>
                        <div class="mb-3">
                       <label for="email" class="form-label">email</label>
                        <input type="email"class="form-control" id="email">
                       </div>
                       <input type="submit" value="Send" class="btn btn-primary">
                    </form>
                </div>
                <div class="col-8 a_tbr">
                    <table class="table pankajtable">
                        <thead>
                        <tr>
                            <th scope="col">id</th>
                            <th scope="col">first_name</th>
                            <th scope="col">last_name</th>
                            <th scope="col">email</th>
                            <th scope="col">action</th>       
                        </tr>
                        </thead>
                        <tbody>
                            <td>
                                <div class="spinner-border m-5" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>  
                            </td>
                        
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> 
        <script>
            
            let tr="";
            //promise chain 
            //PO.then().then().catch();
            
            /*  fetch('http://example.com/movies.json')
            .then((response) => response.json())
            .then((data) => console.log(data));
              */
             let x=document.querySelector('table.pankajtable>tbody')
            fetch('https:reqres.in/api/users?page=2')
            .then((res)=>{
                return res.json();
            })
            .then((data)=>{             
                console.log(data.data);
                for(variable of data.data){
                    tr +=` <tr>
                            <th scope="row">${variable.id}</th>
                            <td>${variable.first_name}</td>
                            <td>${variable.last_name}</td>
                            <td>${variable.email}</td>
                            <td>
                               <button class="btn btn-sm btn-success">view</button> 
                               <button class="btn btn-sm btn-primary">edit</button> 
                               <button class="btn btn-sm btn-danger">Delete</button>  
                                </td>
                        </tr>`;
                    console.log(variable.first_name);
                }
                   x.innerHTML= tr
               
            })
            .catch((err)=>{
                console.log(err);
            }) 
        </script> 
        <script>
         let bdy=document.querySelector('body');
        let sendMyData=(elem)=>{
            let fn=(elem.querySelector('input#firstname').value);
            let ln=(elem.querySelector('input#lastname').value);
            let eml=(elem.querySelector('input#email').value);
            if(fn ===''||ln ===''||eml ===''){
                    //true
              swal('please fill the fileds!', "You clicked the button!", "error");
            }else{
                // false
                bdy.innerHTML +=`<div class="d-flex justify-content-center position-fixed top-50 start-50 pkspinner">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                </div>`;  
            //alert('okk')
            console.log(elem);  
            let jsondata = {
                "first_name":fn,
                "last_name":ln,
                "email":eml
            }
           
            console.log(jsondata);

            fetch('https://reqres.in/api/users',{
                method: 'POST',
                headers: {
             'Content-Type': 'application/json'
                     // 'Content-Type': 'application/x-www-form-urlencoded',
                    },
                 body: JSON.stringify(jsondata)  
            })
            .then((res)=>{
                return res.json();  
            })
            .then((data)=>{
                swal("Data saved successfully!", "You clicked the button!", "success");
                document.querySelector('.pkspinner').remove();
               // alert('Data saved successfully')
            })
            .catch((error)=>{
                console.log('error');
            })
            }

          
        }
        
        
        </script>
    </body>
</html>